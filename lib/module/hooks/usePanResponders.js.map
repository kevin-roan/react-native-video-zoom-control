{"version":3,"sources":["usePanResponders.tsx"],"names":["useEffect","PanResponder","usePanResponders","duration","seekerOffset","volumeOffset","loading","seeking","seekerPosition","seek","seekerWidth","clearControlTimeout","setVolumePosition","setSeekerPosition","setSeeking","setControlTimeout","onEnd","horizontal","inverted","volumePanResponder","create","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","_evt","gestureState","diff","dx","dy","position","onPanResponderRelease","seekPanResponder","evt","nativeEvent","locationX","percent","time"],"mappings":"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","sourcesContent":["import {Dispatch, SetStateAction, useEffect} from 'react';\nimport {PanResponder} from 'react-native';\n\ninterface PanRespondersProps {\n  duration: number;\n  seekerOffset: number;\n  volumeOffset: number;\n  loading: boolean;\n  seeking: boolean;\n  seekerPosition: number;\n  seek?: (time: number, tolerance?: number) => void;\n  seekerWidth: number;\n  clearControlTimeout: () => void;\n  setVolumePosition: (position: number) => void;\n  setSeekerPosition: (position: number) => void;\n  setSeeking: Dispatch<SetStateAction<boolean>>;\n  setControlTimeout: () => void;\n  onEnd: () => void;\n  horizontal?: boolean;\n  inverted?: boolean;\n}\n\nexport const usePanResponders = ({\n  duration,\n  seekerOffset,\n  volumeOffset,\n  loading,\n  seeking,\n  seekerPosition,\n  seek,\n  seekerWidth,\n  clearControlTimeout,\n  setVolumePosition,\n  setSeekerPosition,\n  setSeeking,\n  setControlTimeout,\n  onEnd,\n  horizontal = true,\n  inverted = false,\n}: PanRespondersProps) => {\n  const volumePanResponder = PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponder: () => true,\n    onPanResponderGrant: () => {\n      clearControlTimeout();\n    },\n    onPanResponderMove: (_evt, gestureState) => {\n      const diff = horizontal ? gestureState.dx : gestureState.dy;\n      const position = volumeOffset + diff * (inverted ? -1 : 1);\n      setVolumePosition(position);\n    },\n    onPanResponderRelease: () => {\n      setControlTimeout();\n    },\n  });\n\n  const seekPanResponder = PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponder: () => true,\n    onPanResponderGrant: (evt) => {\n      setSeeking(true);\n      clearControlTimeout();\n      const position = evt.nativeEvent.locationX;\n      setSeekerPosition(position);\n    },\n    onPanResponderMove: (_evt, gestureState) => {\n      const diff = horizontal ? gestureState.dx : gestureState.dy;\n      const position = seekerOffset + diff * (inverted ? -1 : 1);\n      setSeekerPosition(position);\n      setSeeking(true);\n    },\n    onPanResponderRelease: () => {\n      const percent = seekerPosition / seekerWidth;\n      const time = duration * percent;\n\n      if (time >= duration && !loading) {\n        if (typeof onEnd === 'function') {\n          onEnd();\n        }\n      }\n\n      setSeeking(false);\n      seek && seek(time);\n    },\n  });\n\n  useEffect(() => {\n    if (seeking) {\n      const percent = seekerPosition / seekerWidth;\n      const time = duration * percent;\n      seek && seek(time);\n    }\n  }, [duration, seek, seekerPosition, seekerWidth, seeking]);\n\n  return {volumePanResponder, seekPanResponder};\n};\n"]}