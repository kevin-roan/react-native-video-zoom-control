{"version":3,"names":["useEffect","PanResponder","usePanResponders","_ref","duration","seekerOffset","volumeOffset","loading","seeking","seekerPosition","seek","seekerWidth","clearControlTimeout","setVolumePosition","setSeekerPosition","setSeeking","setControlTimeout","onEnd","horizontal","inverted","volumePanResponder","create","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","_evt","gestureState","diff","dx","dy","position","onPanResponderRelease","seekPanResponder","evt","nativeEvent","locationX","percent","time"],"sources":["usePanResponders.tsx"],"sourcesContent":["import {Dispatch, SetStateAction, useEffect} from 'react';\nimport {PanResponder} from 'react-native';\n\ninterface PanRespondersProps {\n  duration: number;\n  seekerOffset: number;\n  volumeOffset: number;\n  loading: boolean;\n  seeking: boolean;\n  seekerPosition: number;\n  seek?: (time: number, tolerance?: number) => void;\n  seekerWidth: number;\n  clearControlTimeout: () => void;\n  setVolumePosition: (position: number) => void;\n  setSeekerPosition: (position: number) => void;\n  setSeeking: Dispatch<SetStateAction<boolean>>;\n  setControlTimeout: () => void;\n  onEnd: () => void;\n  horizontal?: boolean;\n  inverted?: boolean;\n}\n\nexport const usePanResponders = ({\n  duration,\n  seekerOffset,\n  volumeOffset,\n  loading,\n  seeking,\n  seekerPosition,\n  seek,\n  seekerWidth,\n  clearControlTimeout,\n  setVolumePosition,\n  setSeekerPosition,\n  setSeeking,\n  setControlTimeout,\n  onEnd,\n  horizontal = true,\n  inverted = false,\n}: PanRespondersProps) => {\n  const volumePanResponder = PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponder: () => true,\n    onPanResponderGrant: () => {\n      clearControlTimeout();\n    },\n    onPanResponderMove: (_evt, gestureState) => {\n      const diff = horizontal ? gestureState.dx : gestureState.dy;\n      const position = volumeOffset + diff * (inverted ? -1 : 1);\n      setVolumePosition(position);\n    },\n    onPanResponderRelease: () => {\n      setControlTimeout();\n    },\n  });\n\n  const seekPanResponder = PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponder: () => true,\n    onPanResponderGrant: (evt) => {\n      setSeeking(true);\n      clearControlTimeout();\n      const position = evt.nativeEvent.locationX;\n      setSeekerPosition(position);\n    },\n    onPanResponderMove: (_evt, gestureState) => {\n      const diff = horizontal ? gestureState.dx : gestureState.dy;\n      const position = seekerOffset + diff * (inverted ? -1 : 1);\n      setSeekerPosition(position);\n      setSeeking(true);\n    },\n    onPanResponderRelease: () => {\n      const percent = seekerPosition / seekerWidth;\n      const time = duration * percent;\n\n      if (time >= duration && !loading) {\n        if (typeof onEnd === 'function') {\n          onEnd();\n        }\n      }\n\n      setSeeking(false);\n      seek && seek(time);\n    },\n  });\n\n  useEffect(() => {\n    if (seeking) {\n      const percent = seekerPosition / seekerWidth;\n      const time = duration * percent;\n      seek && seek(time);\n    }\n  }, [duration, seek, seekerPosition, seekerWidth, seeking]);\n\n  return {volumePanResponder, seekPanResponder};\n};\n"],"mappings":"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"}