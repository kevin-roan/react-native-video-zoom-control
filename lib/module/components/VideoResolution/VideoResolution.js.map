{"version":3,"names":["React","useState","View","Image","TouchableOpacity","Text","ScrollView","styles","gearIcon","require","VideoResolution","_ref","handleResolutionModalOpen","createElement","style","container","onPress","hitSlop","top","bottom","left","right","source","icon","ResolutionModal","_ref2","videoUrls","handleSource","selectedQuality","setSelectedQuality","availableRenditions","setAvailableRenditions","useEffect","console","log","matchedVideo","find","v","rendition","link","handleSelectedResolution","length","videoRenditions","map","video","sortedRenditions","sort","a","b","resolutionA","parseInt","resolutionB","modalContainer","modal","modalHeading","seperator","rendtionScrollContainer","key","modalSwitch","modalText"],"sources":["VideoResolution.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { useState } from \"react\";\nimport { View, Image, TouchableOpacity, Text } from \"react-native\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport { styles } from \"react-native-media-console/src/components/VideoResolution/styles\";\nconst gearIcon = require(\"../../assets/img/gear.png\");\n\ninterface VideoResolutionProps {\n  handleResolutionModalOpen: () => void;\n}\n\ninterface ResolutionModalProps {\n  videoUrls: string[];\n  handleSource: (source: string) => void;\n}\n\nexport const VideoResolution: React.FC<VideoResolutionProps> = ({\n  handleResolutionModalOpen,\n}) => {\n  return (\n    <TouchableOpacity\n      style={styles.container}\n      onPress={() => handleResolutionModalOpen()}\n      hitSlop={{\n        top: 50,\n        bottom: 50,\n        left: 50,\n        right: 50,\n      }}\n    >\n      <Image source={gearIcon} style={styles.icon} />\n    </TouchableOpacity>\n  );\n};\n\nexport const ResolutionModal: React.FC<ResolutionModalProps> = ({\n  videoUrls,\n  handleSource\n}) => {\n  const [selectedQuality, setSelectedQuality] = useState(\"\");\n  const [availableRenditions,setAvailableRenditions] = useState([]);\n\n\n  React.useEffect(() => {\n    if (selectedQuality !== \"\") {\n      if (selectedQuality === 'auto'){\n        console.log('user selected auto',selectedQuality)\n      }\n      // @ts-ignore\n      const matchedVideo = videoUrls.find(v=>v.rendition   === selectedQuality)\n    if (matchedVideo && matchedVideo.link) {\n      // @ts-ignore\n      handleSource(matchedVideo.link);\n    } else {\n      handleSource('defaultSource');\n      }\n    }\n  }, [selectedQuality]);\n\n\n  // @ts-ignore\n  const handleSelectedResolution = (rendition) => {\n    console.log('selected rendition',rendition)\n    setSelectedQuality(rendition);\n  };\n\n\nReact.useEffect(() => {\n    if (availableRenditions.length === 0) {\n      // @ts-ignore\n      const videoRenditions = videoUrls.map(video => video[\"rendition\"]);\n\n      const sortedRenditions = videoRenditions.sort((a, b) => {\n        const resolutionA = parseInt(a, 10); \n        const resolutionB = parseInt(b, 10); \n\n        return resolutionB - resolutionA; \n      });\n      // @ts-ignore \n      setAvailableRenditions(sortedRenditions);\n    }\n  }, [availableRenditions.length]); \n\n  return (\n    <View style={styles.modalContainer}>\n      <View style={styles.modal}>\n        <Text style={styles.modalHeading}>Video Quality</Text>\n        <View style={styles.seperator}></View>\n        <View style={styles.rendtionScrollContainer}>\n        <ScrollView>\n          {\n            availableRenditions.map((rendition) => (\n              <TouchableOpacity\n                key={rendition}\n                style={[\n                  styles.modalSwitch,\n                  selectedQuality === rendition? styles.selectedQuality : null,\n                ]}\n                onPress={() => handleSelectedResolution(rendition)}\n              >\n                <Text style={styles.modalText}>{rendition}</Text>\n              </TouchableOpacity>\n            ))}\n          <TouchableOpacity\n            style={[\n              styles.modalSwitch,\n              selectedQuality === \"auto\" ? styles.selectedQuality : null,\n            ]}\n            onPress={() => handleSelectedResolution(\"auto\")}\n          >\n            <Text style={styles.modalText}>Auto </Text>\n          </TouchableOpacity>\n        </ScrollView>\n\n        </View>\n      </View>\n    </View>\n  );\n};\n\nexport default VideoResolution;\n"],"mappings":"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"}