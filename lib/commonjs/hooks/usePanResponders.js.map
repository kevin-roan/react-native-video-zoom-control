{"version":3,"names":["_react","require","_reactNative","usePanResponders","_ref","duration","seekerOffset","volumeOffset","loading","seeking","seekerPosition","seek","seekerWidth","clearControlTimeout","setVolumePosition","setSeekerPosition","setSeeking","setControlTimeout","onEnd","horizontal","inverted","volumePanResponder","PanResponder","create","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","_evt","gestureState","diff","dx","dy","position","onPanResponderRelease","seekPanResponder","evt","nativeEvent","locationX","percent","time","useEffect","exports"],"sources":["usePanResponders.tsx"],"sourcesContent":["import {Dispatch, SetStateAction, useEffect} from 'react';\nimport {PanResponder} from 'react-native';\n\ninterface PanRespondersProps {\n  duration: number;\n  seekerOffset: number;\n  volumeOffset: number;\n  loading: boolean;\n  seeking: boolean;\n  seekerPosition: number;\n  seek?: (time: number, tolerance?: number) => void;\n  seekerWidth: number;\n  clearControlTimeout: () => void;\n  setVolumePosition: (position: number) => void;\n  setSeekerPosition: (position: number) => void;\n  setSeeking: Dispatch<SetStateAction<boolean>>;\n  setControlTimeout: () => void;\n  onEnd: () => void;\n  horizontal?: boolean;\n  inverted?: boolean;\n}\n\nexport const usePanResponders = ({\n  duration,\n  seekerOffset,\n  volumeOffset,\n  loading,\n  seeking,\n  seekerPosition,\n  seek,\n  seekerWidth,\n  clearControlTimeout,\n  setVolumePosition,\n  setSeekerPosition,\n  setSeeking,\n  setControlTimeout,\n  onEnd,\n  horizontal = true,\n  inverted = false,\n}: PanRespondersProps) => {\n  const volumePanResponder = PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponder: () => true,\n    onPanResponderGrant: () => {\n      clearControlTimeout();\n    },\n    onPanResponderMove: (_evt, gestureState) => {\n      const diff = horizontal ? gestureState.dx : gestureState.dy;\n      const position = volumeOffset + diff * (inverted ? -1 : 1);\n      setVolumePosition(position);\n    },\n    onPanResponderRelease: () => {\n      setControlTimeout();\n    },\n  });\n\n  const seekPanResponder = PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponder: () => true,\n    onPanResponderGrant: (evt) => {\n      setSeeking(true);\n      clearControlTimeout();\n      const position = evt.nativeEvent.locationX;\n      setSeekerPosition(position);\n    },\n    onPanResponderMove: (_evt, gestureState) => {\n      const diff = horizontal ? gestureState.dx : gestureState.dy;\n      const position = seekerOffset + diff * (inverted ? -1 : 1);\n      setSeekerPosition(position);\n      setSeeking(true);\n    },\n    onPanResponderRelease: () => {\n      const percent = seekerPosition / seekerWidth;\n      const time = duration * percent;\n\n      if (time >= duration && !loading) {\n        if (typeof onEnd === 'function') {\n          onEnd();\n        }\n      }\n\n      setSeeking(false);\n      seek && seek(time);\n    },\n  });\n\n  useEffect(() => {\n    if (seeking) {\n      const percent = seekerPosition / seekerWidth;\n      const time = duration * percent;\n      seek && seek(time);\n    }\n  }, [duration, seek, seekerPosition, seekerWidth, seeking]);\n\n  return {volumePanResponder, seekPanResponder};\n};\n"],"mappings":"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"}