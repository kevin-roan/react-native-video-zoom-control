{"version":3,"names":["_react","_interopRequireWildcard","require","React","_reactNative","_reactNativeGestureHandler","_styles","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","gearIcon","VideoResolution","_ref","handleResolutionModalOpen","createElement","TouchableOpacity","style","styles","container","onPress","hitSlop","top","bottom","left","right","Image","source","icon","exports","ResolutionModal","_ref2","videoUrls","handleSource","selectedQuality","setSelectedQuality","useState","availableRenditions","setAvailableRenditions","useEffect","console","log","matchedVideo","find","v","rendition","link","handleSelectedResolution","length","videoRenditions","map","video","sortedRenditions","sort","a","b","resolutionA","parseInt","resolutionB","View","modalContainer","modal","Text","modalHeading","seperator","rendtionScrollContainer","ScrollView","modalSwitch","modalText","_default"],"sources":["VideoResolution.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { useState } from \"react\";\nimport { View, Image, TouchableOpacity, Text } from \"react-native\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport { styles } from \"react-native-media-console/src/components/VideoResolution/styles\";\nconst gearIcon = require(\"../../assets/img/gear.png\");\n\ninterface VideoResolutionProps {\n  handleResolutionModalOpen: () => void;\n}\n\ninterface ResolutionModalProps {\n  videoUrls: string[];\n  handleSource: (source: string) => void;\n}\n\nexport const VideoResolution: React.FC<VideoResolutionProps> = ({\n  handleResolutionModalOpen,\n}) => {\n  return (\n    <TouchableOpacity\n      style={styles.container}\n      onPress={() => handleResolutionModalOpen()}\n      hitSlop={{\n        top: 50,\n        bottom: 50,\n        left: 50,\n        right: 50,\n      }}\n    >\n      <Image source={gearIcon} style={styles.icon} />\n    </TouchableOpacity>\n  );\n};\n\nexport const ResolutionModal: React.FC<ResolutionModalProps> = ({\n  videoUrls,\n  handleSource\n}) => {\n  const [selectedQuality, setSelectedQuality] = useState(\"\");\n  const [availableRenditions,setAvailableRenditions] = useState([]);\n\n\n  React.useEffect(() => {\n    if (selectedQuality !== \"\") {\n      if (selectedQuality === 'auto'){\n        console.log('user selected auto',selectedQuality)\n      }\n      // @ts-ignore\n      const matchedVideo = videoUrls.find(v=>v.rendition   === selectedQuality)\n    if (matchedVideo && matchedVideo.link) {\n      // @ts-ignore\n      handleSource(matchedVideo.link);\n    } else {\n      handleSource('defaultSource');\n      }\n    }\n  }, [selectedQuality]);\n\n\n  // @ts-ignore\n  const handleSelectedResolution = (rendition) => {\n    console.log('selected rendition',rendition)\n    setSelectedQuality(rendition);\n  };\n\n\nReact.useEffect(() => {\n    if (availableRenditions.length === 0) {\n      // @ts-ignore\n      const videoRenditions = videoUrls.map(video => video[\"rendition\"]);\n\n      const sortedRenditions = videoRenditions.sort((a, b) => {\n        const resolutionA = parseInt(a, 10); \n        const resolutionB = parseInt(b, 10); \n\n        return resolutionB - resolutionA; \n      });\n      // @ts-ignore \n      setAvailableRenditions(sortedRenditions);\n    }\n  }, [availableRenditions.length]); \n\n  return (\n    <View style={styles.modalContainer}>\n      <View style={styles.modal}>\n        <Text style={styles.modalHeading}>Video Quality</Text>\n        <View style={styles.seperator}></View>\n        <View style={styles.rendtionScrollContainer}>\n        <ScrollView>\n          {\n            availableRenditions.map((rendition) => (\n              <TouchableOpacity\n                key={rendition}\n                style={[\n                  styles.modalSwitch,\n                  selectedQuality === rendition? styles.selectedQuality : null,\n                ]}\n                onPress={() => handleSelectedResolution(rendition)}\n              >\n                <Text style={styles.modalText}>{rendition}</Text>\n              </TouchableOpacity>\n            ))}\n          <TouchableOpacity\n            style={[\n              styles.modalSwitch,\n              selectedQuality === \"auto\" ? styles.selectedQuality : null,\n            ]}\n            onPress={() => handleSelectedResolution(\"auto\")}\n          >\n            <Text style={styles.modalText}>Auto </Text>\n          </TouchableOpacity>\n        </ScrollView>\n\n        </View>\n      </View>\n    </View>\n  );\n};\n\nexport default VideoResolution;\n"],"mappings":"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"}